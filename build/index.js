(()=>{"use strict";const e=window.wp.element,s=window.ReactJSXRuntime;function t(){SCGS_DATA;const[t,r]=(0,e.useState)([]),[d,n]=(0,e.useState)([]),[i,c]=(0,e.useState)([]),[l,h]=(0,e.useState)(!0),[a,o]=(0,e.useState)(""),j=async e=>{const s=await fetch(`${SCGS_DATA.apiUrl}/${e}`,{method:"GET",headers:{"X-WP-Nonce":SCGS_DATA.nonce,"Content-Type":"application/json"},credentials:"same-origin"}),t=await s.text();if(!s.ok)throw console.error(`API error (${e}):`,t),new Error(`Failed to load ${e}`);try{return JSON.parse(t)}catch(s){throw console.error(`Non-JSON response from ${e}:`,t),s}};return(0,e.useEffect)(()=>{!async function(){try{const[e,s,t]=await Promise.all([j("students"),j("classes"),j("subjects")]);r(Array.isArray(e)?e:[]),n(Array.isArray(s)?s:[]),c(Array.isArray(t)?t:[])}catch(e){o(e.message)}finally{h(!1)}}()},[]),(0,s.jsxs)("div",{className:"wrap scgs-admin",children:[(0,s.jsx)("h1",{children:"School Certificates"}),a&&(0,s.jsx)("div",{className:"notice notice-error",children:(0,s.jsx)("p",{children:a})}),l&&(0,s.jsx)("p",{children:"Loading dataâ€¦"}),(0,s.jsx)("h2",{children:"Students"}),0===t.length?(0,s.jsx)("p",{children:"No students found."}):(0,s.jsxs)("table",{className:"widefat striped",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Code"}),(0,s.jsx)("th",{children:"First Name"}),(0,s.jsx)("th",{children:"Last Name"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),(0,s.jsx)("td",{children:e.student_code}),(0,s.jsx)("td",{children:e.first_name}),(0,s.jsx)("td",{children:e.last_name})]},e.id))})]}),(0,s.jsx)("hr",{}),(0,s.jsx)("h2",{children:"Classes"}),0===d.length?(0,s.jsx)("p",{children:"No classes found."}):(0,s.jsxs)("table",{className:"widefat striped",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Grade Level"}),(0,s.jsx)("th",{children:"Section"}),(0,s.jsx)("th",{children:"Students Count"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),(0,s.jsx)("td",{children:e.grade_level}),(0,s.jsx)("td",{children:e.section}),(0,s.jsx)("td",{children:e.students_count})]},e.id))})]}),(0,s.jsx)("hr",{}),(0,s.jsx)("h2",{children:"Subjects"}),0===i.length?(0,s.jsx)("p",{children:"No subjects found."}):(0,s.jsxs)("table",{className:"widefat striped",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Grade"}),(0,s.jsx)("th",{children:"Credit Type"}),(0,s.jsx)("th",{children:"Group"}),(0,s.jsx)("th",{children:"Required"})]})}),(0,s.jsx)("tbody",{children:i.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.grade_level}),(0,s.jsx)("td",{children:e.credit_type}),(0,s.jsx)("td",{children:e.group_name||"-"}),(0,s.jsx)("td",{children:e.is_required?"Yes":"No"})]},e.id))})]})]})}console.log("SCGS JS LOADED");const r=document.getElementById("scgs-admin-root");r&&(0,e.render)((0,s.jsx)(t,{}),r)})();